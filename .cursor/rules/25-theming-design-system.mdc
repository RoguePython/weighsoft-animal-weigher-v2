---
globs:
  - "src/**/*"
alwaysApply: true
---

# Theming & Design System

## TL;DR - Quick Reference

**Use theme via hook**:
```typescript
const { theme, isDark } = useTheme();
<View style={{ backgroundColor: theme.background.primary }} />
```

**Key colors**:
- Primary: `theme.interactive.primary` (#1976D2)
- Background: `theme.background.primary`, `theme.background.secondary`
- Text: `theme.text.primary`, `theme.text.secondary`
- Status: `theme.status.success/warning/error`

**Spacing**: Use `SPACING[4]` (16px), `SPACING[2]` (8px)  
**Border radius**: Use `BORDER_RADIUS.md` (8px)

**Read full rule for**: Complete color system, typography, components, theme provider.

---

## Design Philosophy

### Business Professional Aesthetic
- **Clean & Minimal**: Focus on content, reduce visual clutter
- **Trust & Reliability**: Colors that convey professionalism
- **Functional First**: Every element serves a purpose
- **Accessible**: WCAG AA compliant contrast ratios
- **Consistent**: Unified design language throughout

## Color System

### Primary Colors
```typescript
// src/shared/constants/colors.ts

export const COLORS = {
  // ============================================
  // BRAND COLORS
  // ============================================
  
  // Primary - Professional Blue
  // Used for: Primary actions, links, active states
  primary: {
    50: '#E3F2FD',   // Lightest - backgrounds
    100: '#BBDEFB',  // Light - hover states
    200: '#90CAF9',
    300: '#64B5F6',
    400: '#42A5F5',
    500: '#1976D2',  // DEFAULT - buttons, links
    600: '#1565C0',  // Hover state
    700: '#0D47A1',  // Active/pressed
    800: '#0A3D91',
    900: '#062A6E',  // Darkest
  },

  // Secondary - Warm Gray
  // Used for: Secondary actions, borders, subtle backgrounds
  secondary: {
    50: '#FAFAFA',
    100: '#F5F5F5',
    200: '#EEEEEE',
    300: '#E0E0E0',
    400: '#BDBDBD',
    500: '#757575',  // DEFAULT
    600: '#616161',
    700: '#424242',
    800: '#303030',
    900: '#212121',
  },

  // Accent - Teal
  // Used for: Highlights, success adjacent, secondary CTAs
  accent: {
    50: '#E0F2F1',
    100: '#B2DFDB',
    200: '#80CBC4',
    300: '#4DB6AC',
    400: '#26A69A',
    500: '#00897B',  // DEFAULT
    600: '#00796B',
    700: '#00695C',
    800: '#005A4F',
    900: '#004D40',
  },

  // ============================================
  // SEMANTIC COLORS
  // ============================================

  // Success - Green
  success: {
    light: '#E8F5E9',
    main: '#2E7D32',
    dark: '#1B5E20',
    contrast: '#FFFFFF',
  },

  // Warning - Amber
  warning: {
    light: '#FFF8E1',
    main: '#F9A825',
    dark: '#F57F17',
    contrast: '#212121',
  },

  // Error - Red
  error: {
    light: '#FFEBEE',
    main: '#C62828',
    dark: '#B71C1C',
    contrast: '#FFFFFF',
  },

  // Info - Blue
  info: {
    light: '#E3F2FD',
    main: '#1565C0',
    dark: '#0D47A1',
    contrast: '#FFFFFF',
  },

  // ============================================
  // NEUTRAL COLORS
  // ============================================

  neutral: {
    white: '#FFFFFF',
    black: '#000000',
    
    // Grays
    gray50: '#FAFAFA',
    gray100: '#F5F5F5',
    gray200: '#EEEEEE',
    gray300: '#E0E0E0',
    gray400: '#BDBDBD',
    gray500: '#9E9E9E',
    gray600: '#757575',
    gray700: '#616161',
    gray800: '#424242',
    gray900: '#212121',
  },

} as const;
```

### Theme Definitions

```typescript
// src/shared/constants/theme.ts

export interface Theme {
  // Mode
  mode: 'light' | 'dark';
  
  // Backgrounds
  background: {
    primary: string;     // Main app background
    secondary: string;   // Card backgrounds
    tertiary: string;    // Subtle section backgrounds
    elevated: string;    // Modals, dropdowns
  };
  
  // Surfaces
  surface: {
    default: string;
    raised: string;
    overlay: string;
  };
  
  // Text
  text: {
    primary: string;     // Main text
    secondary: string;   // Subdued text
    tertiary: string;    // Hints, placeholders
    disabled: string;
    inverse: string;     // Text on dark backgrounds
    link: string;
  };
  
  // Borders
  border: {
    default: string;
    strong: string;
    focus: string;
  };
  
  // Interactive
  interactive: {
    primary: string;
    primaryHover: string;
    primaryActive: string;
    primaryDisabled: string;
    secondary: string;
    secondaryHover: string;
  };
  
  // Status
  status: {
    success: string;
    successBackground: string;
    warning: string;
    warningBackground: string;
    error: string;
    errorBackground: string;
    info: string;
    infoBackground: string;
  };
  
  // Shadows
  shadow: {
    small: string;
    medium: string;
    large: string;
  };
}

// ============================================
// LIGHT THEME
// ============================================
export const lightTheme: Theme = {
  mode: 'light',
  
  background: {
    primary: '#FFFFFF',
    secondary: '#F8F9FA',
    tertiary: '#F1F3F5',
    elevated: '#FFFFFF',
  },
  
  surface: {
    default: '#FFFFFF',
    raised: '#FFFFFF',
    overlay: 'rgba(0, 0, 0, 0.5)',
  },
  
  text: {
    primary: '#212121',      // High contrast
    secondary: '#616161',    // Medium emphasis
    tertiary: '#9E9E9E',     // Low emphasis
    disabled: '#BDBDBD',
    inverse: '#FFFFFF',
    link: '#1976D2',
  },
  
  border: {
    default: '#E0E0E0',
    strong: '#BDBDBD',
    focus: '#1976D2',
  },
  
  interactive: {
    primary: '#1976D2',
    primaryHover: '#1565C0',
    primaryActive: '#0D47A1',
    primaryDisabled: '#90CAF9',
    secondary: '#F5F5F5',
    secondaryHover: '#EEEEEE',
  },
  
  status: {
    success: '#2E7D32',
    successBackground: '#E8F5E9',
    warning: '#F9A825',
    warningBackground: '#FFF8E1',
    error: '#C62828',
    errorBackground: '#FFEBEE',
    info: '#1565C0',
    infoBackground: '#E3F2FD',
  },
  
  shadow: {
    small: '0 1px 2px rgba(0, 0, 0, 0.05)',
    medium: '0 4px 6px rgba(0, 0, 0, 0.07)',
    large: '0 10px 15px rgba(0, 0, 0, 0.1)',
  },
};

// ============================================
// DARK THEME
// ============================================
export const darkTheme: Theme = {
  mode: 'dark',
  
  background: {
    primary: '#121212',
    secondary: '#1E1E1E',
    tertiary: '#252525',
    elevated: '#2D2D2D',
  },
  
  surface: {
    default: '#1E1E1E',
    raised: '#2D2D2D',
    overlay: 'rgba(0, 0, 0, 0.7)',
  },
  
  text: {
    primary: '#FFFFFF',
    secondary: '#B0B0B0',
    tertiary: '#757575',
    disabled: '#505050',
    inverse: '#212121',
    link: '#64B5F6',
  },
  
  border: {
    default: '#333333',
    strong: '#505050',
    focus: '#64B5F6',
  },
  
  interactive: {
    primary: '#1E88E5',
    primaryHover: '#42A5F5',
    primaryActive: '#1565C0',
    primaryDisabled: '#0D47A1',
    secondary: '#2D2D2D',
    secondaryHover: '#3D3D3D',
  },
  
  status: {
    success: '#66BB6A',
    successBackground: '#1B3D1F',
    warning: '#FFB74D',
    warningBackground: '#3D3012',
    error: '#EF5350',
    errorBackground: '#3D1B1B',
    info: '#42A5F5',
    infoBackground: '#12283D',
  },
  
  shadow: {
    small: '0 1px 2px rgba(0, 0, 0, 0.3)',
    medium: '0 4px 6px rgba(0, 0, 0, 0.4)',
    large: '0 10px 15px rgba(0, 0, 0, 0.5)',
  },
};
```

## Typography

```typescript
// src/shared/constants/typography.ts

export const FONTS = {
  // System fonts for performance
  regular: 'System',
  medium: 'System',
  bold: 'System',
  
  // Or custom fonts
  // regular: 'Inter-Regular',
  // medium: 'Inter-Medium',
  // bold: 'Inter-Bold',
} as const;

export const FONT_SIZES = {
  xs: 12,
  sm: 14,
  md: 16,
  lg: 18,
  xl: 20,
  '2xl': 24,
  '3xl': 30,
  '4xl': 36,
} as const;

export const LINE_HEIGHTS = {
  tight: 1.25,
  normal: 1.5,
  relaxed: 1.75,
} as const;

export const FONT_WEIGHTS = {
  regular: '400' as const,
  medium: '500' as const,
  semibold: '600' as const,
  bold: '700' as const,
};

// Pre-defined text styles
export const TEXT_STYLES = {
  // Headings
  h1: {
    fontSize: FONT_SIZES['3xl'],
    fontWeight: FONT_WEIGHTS.bold,
    lineHeight: FONT_SIZES['3xl'] * LINE_HEIGHTS.tight,
    letterSpacing: -0.5,
  },
  h2: {
    fontSize: FONT_SIZES['2xl'],
    fontWeight: FONT_WEIGHTS.bold,
    lineHeight: FONT_SIZES['2xl'] * LINE_HEIGHTS.tight,
    letterSpacing: -0.25,
  },
  h3: {
    fontSize: FONT_SIZES.xl,
    fontWeight: FONT_WEIGHTS.semibold,
    lineHeight: FONT_SIZES.xl * LINE_HEIGHTS.tight,
  },
  h4: {
    fontSize: FONT_SIZES.lg,
    fontWeight: FONT_WEIGHTS.semibold,
    lineHeight: FONT_SIZES.lg * LINE_HEIGHTS.normal,
  },
  
  // Body
  bodyLarge: {
    fontSize: FONT_SIZES.lg,
    fontWeight: FONT_WEIGHTS.regular,
    lineHeight: FONT_SIZES.lg * LINE_HEIGHTS.normal,
  },
  body: {
    fontSize: FONT_SIZES.md,
    fontWeight: FONT_WEIGHTS.regular,
    lineHeight: FONT_SIZES.md * LINE_HEIGHTS.normal,
  },
  bodySmall: {
    fontSize: FONT_SIZES.sm,
    fontWeight: FONT_WEIGHTS.regular,
    lineHeight: FONT_SIZES.sm * LINE_HEIGHTS.normal,
  },
  
  // UI
  button: {
    fontSize: FONT_SIZES.md,
    fontWeight: FONT_WEIGHTS.medium,
    lineHeight: FONT_SIZES.md * LINE_HEIGHTS.tight,
    letterSpacing: 0.5,
  },
  caption: {
    fontSize: FONT_SIZES.xs,
    fontWeight: FONT_WEIGHTS.regular,
    lineHeight: FONT_SIZES.xs * LINE_HEIGHTS.normal,
  },
  label: {
    fontSize: FONT_SIZES.sm,
    fontWeight: FONT_WEIGHTS.medium,
    lineHeight: FONT_SIZES.sm * LINE_HEIGHTS.tight,
  },
};
```

## Spacing

```typescript
// src/shared/constants/spacing.ts

export const SPACING = {
  0: 0,
  1: 4,
  2: 8,
  3: 12,
  4: 16,
  5: 20,
  6: 24,
  8: 32,
  10: 40,
  12: 48,
  16: 64,
} as const;

export const BORDER_RADIUS = {
  none: 0,
  sm: 4,
  md: 8,
  lg: 12,
  xl: 16,
  full: 9999,
} as const;
```

## Theme Provider

```typescript
// src/infrastructure/theme/theme-context.tsx
import React, { createContext, useContext, useState, useEffect } from 'react';
import { useColorScheme } from 'react-native';
import { Theme, lightTheme, darkTheme } from '@/shared/constants/theme';

interface ThemeContextValue {
  theme: Theme;
  isDark: boolean;
  toggleTheme: () => void;
  setTheme: (mode: 'light' | 'dark' | 'system') => void;
}

const ThemeContext = createContext<ThemeContextValue | null>(null);

export const ThemeProvider: React.FC<{ children: React.ReactNode }> = ({ 
  children 
}) => {
  const systemColorScheme = useColorScheme();
  const [themeMode, setThemeMode] = useState<'light' | 'dark' | 'system'>('system');
  
  const isDark = themeMode === 'system' 
    ? systemColorScheme === 'dark' 
    : themeMode === 'dark';
  
  const theme = isDark ? darkTheme : lightTheme;

  const toggleTheme = () => {
    setThemeMode(current => current === 'dark' ? 'light' : 'dark');
  };

  const value = {
    theme,
    isDark,
    toggleTheme,
    setTheme: setThemeMode,
  };

  return (
    <ThemeContext.Provider value={value}>
      {children}
    </ThemeContext.Provider>
  );
};

export const useTheme = (): ThemeContextValue => {
  const context = useContext(ThemeContext);
  if (!context) {
    throw new Error('useTheme must be used within ThemeProvider');
  }
  return context;
};
```

## Styled Components

```typescript
// src/presentation/components/styled/index.tsx
import { useTheme } from '@/infrastructure/theme/theme-context';
import { SPACING, BORDER_RADIUS } from '@/shared/constants/spacing';
import { TEXT_STYLES } from '@/shared/constants/typography';

// Card Component
export const Card: React.FC<CardProps> = ({ children, style, ...props }) => {
  const { theme } = useTheme();
  
  return (
    <View
      style={[
        {
          backgroundColor: theme.surface.default,
          borderRadius: BORDER_RADIUS.lg,
          padding: SPACING[4],
          borderWidth: 1,
          borderColor: theme.border.default,
        },
        style,
      ]}
      {...props}
    >
      {children}
    </View>
  );
};

// Primary Button
export const PrimaryButton: React.FC<ButtonProps> = ({ 
  title, 
  onPress, 
  disabled,
  loading,
}) => {
  const { theme } = useTheme();
  
  return (
    <TouchableOpacity
      onPress={onPress}
      disabled={disabled || loading}
      style={{
        backgroundColor: disabled 
          ? theme.interactive.primaryDisabled 
          : theme.interactive.primary,
        paddingVertical: SPACING[3],
        paddingHorizontal: SPACING[6],
        borderRadius: BORDER_RADIUS.md,
        alignItems: 'center',
        justifyContent: 'center',
        minHeight: 48,
      }}
      activeOpacity={0.8}
    >
      {loading ? (
        <ActivityIndicator color={theme.text.inverse} />
      ) : (
        <Text style={[TEXT_STYLES.button, { color: theme.text.inverse }]}>
          {title}
        </Text>
      )}
    </TouchableOpacity>
  );
};

// Text Components
export const Heading1: React.FC<TextProps> = ({ children, style }) => {
  const { theme } = useTheme();
  return (
    <Text style={[TEXT_STYLES.h1, { color: theme.text.primary }, style]}>
      {children}
    </Text>
  );
};

export const BodyText: React.FC<TextProps> = ({ children, style }) => {
  const { theme } = useTheme();
  return (
    <Text style={[TEXT_STYLES.body, { color: theme.text.primary }, style]}>
      {children}
    </Text>
  );
};
```

## Usage Example

```typescript
// Example Screen
import { useTheme } from '@/infrastructure/theme/theme-context';
import { Card, PrimaryButton, Heading1, BodyText } from '@/presentation/components/styled';

export default function AnimalDetailScreen() {
  const { theme, isDark, toggleTheme } = useTheme();
  
  return (
    <View style={{ flex: 1, backgroundColor: theme.background.primary }}>
      <Card>
        <Heading1>Bessie</Heading1>
        <BodyText>Holstein Cow</BodyText>
        
        <View style={{ 
          backgroundColor: theme.status.successBackground,
          padding: SPACING[2],
          borderRadius: BORDER_RADIUS.sm,
        }}>
          <Text style={{ color: theme.status.success }}>
            Healthy Weight
          </Text>
        </View>
      </Card>
      
      <PrimaryButton 
        title="Record Weight" 
        onPress={handleRecordWeight}
      />
    </View>
  );
}
```
